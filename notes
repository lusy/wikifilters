# Wichtige Fragen

* Wie funktionieren sie?
  * technisch
  * governance/community level
* Sind sie wirksam (aus wessen Perspektive)
* Was für Wirkmechanismen stecken dahinter?
* Wie komplex sind die?
* Wie sichtbar sind sie für normalsterbliche Nutzer*innen
* Wer macht sie? Wie viele Menschen sind das?
* Was sind das für Filter
* Wie sind sie entstanden?
  * Aus was für eine Debatte sind sie entstanden?
* Wie haben sie sich über die Jahre entwickelt?
* Wie ist es organisiert?
* Was sind die Auswirkungen auf die Nutzer*innen?
* Wie viele False Positives erzeugen die Filter? Wie wird damit umgegangen?


# Weitere Gedanken

* "*Can* prevent *potentially* harmful behaviour" <--- wo kommt das her?
* general context: upload filter
* check toollab (stats + graphs)
* was gibts dazu bereits für Forschung?
* was wird eigentlich als Vandalismus definiert? (falls Vandalismus der Hauptanlass für die Filter is) (auch historisch)


========================================================================
https://en.wikipedia.org/wiki/Wikipedia:Edit_filter

"The edit filter is a tool that allows editors in the edit filter manager group to set controls mainly[1] to address common patterns of harmful editing."
Current filters: https://en.wikipedia.org/wiki/Special:AbuseFilter

DEF:
"A filter automatically compares every edit made to Wikipedia against a defined set of conditions. If an edit matches the conditions of a filter, that filter will respond by logging the edit. It may also tag the edit summary, warn the editor, revoke his/her autoconfirmed status, and/or disallow the edit entirely.[2]"
Footnote 2: "The extension also allows for temporary blocking, but these features are disabled on the English Wikipedia." <-- TODO: Is there wikipedia on which it isn't disallowed?

Software: https://www.mediawiki.org/wiki/Extension:AbuseFilter
---> enabled on English Wikipedia 2009

On the name:
"The term "edit filter" rather than "abuse filter" is currently used for user-facing elements of the filter as some of the edits it flags are not harmful;[1] the terms are otherwise synonymous."

"Because even the smallest mistake in editing a filter can disrupt the encyclopedia, only editors who have the required good judgment and technical proficiency are permitted to configure filters."
--> Who are these editors? Who decides they are qualified enough?

"Filters are created and configured by edit filter managers, but they can be requested by any editor."
"all administrators can view private filters"
"This group is assignable by administrators, who may also assign the right to themselves"
"The assignment of the edit filter manager user right to non-admins is highly restricted. It should only be requested by and given to highly trusted users, when there is a clear and demonstrated need for it."
"demonstrated knowledge of the extension's syntax and in understanding and crafting regular expressions is absolutely essential"
"Editors who are not edit filter managers should consider helping out at requested edit filters and troubleshooting at false positives to help gain experience and demonstrate these skills"
"Requests for assignment of the group to non-admins can be made at the edit filter noticeboard, where a discussion will be held before a decision is made;discussions are normally held open for 7 days."
"If an edit filter manager is misusing the user right, the concern should first be raised with them directly. If discussion does not resolve the issue, a request for discussion or removal of the user right may be made at the edit filter noticeboard. "
"If you have the edit filter manager user right, please ensure you follow the Password strength requirements and appropriate personal security practices. Two-factor authentication enrollment is available for edit filter managers. Because edit filters affect every edit made, a compromised account will be blocked and its privileges removed on grounds of site security. In the unlikely event that your account is compromised, notify an administrator or bureaucrat (for administrators) immediately so they can block your account and remove any sensitive privileges to prevent damage. "
//interessanterweise is 2factor-auth auch nur für diese speziellen Benutzer*innen erlaubt; sonst kann man die Seite nicht ansehen

List of current edit filter managers
EN: https://en.wikipedia.org/wiki/Special:ListUsers/abusefilter (currently: 155)
CAT: https://ca.wikipedia.org/wiki/Especial:Usuaris/abusefilter (currently: 4 users)

-- auf Spanisch/Deutsch/Russisch existiert die Rolle nicht; interessant zu wissen, ob sie iwo subsumiert wurde
-- auf Bulgarisch übrigens auch nicht, aber da existiert auch die gesamte EditFilter seite nicht

What do filters do?/What actions they trigger (vgl DEF) in order of graveness:
- disallow -- editor is informed, if their edit is being disallowed and offered the option to report a false positive;
  "It is also possible to have a user's autoconfirmed status revoked if a user trips the filter."
  caution to use it seldomly and after a thorough discussion on what is a undesirable edit
- warn -- editor is informed that their edit may be problematic and given the option to save or abort the edit (and in report the false positive trigerred by the filter)
- add a tag - "edit is tagged for review by patrollers." -- TODO who are patrollers? are there some in lang versions other than EN?
  "Patrols are a specialized type of WikiProject used in the English Wikipedia to watch over a class of pages and take any appropriate actions. Most patrol actions are performed by individual Wikipedians, but some are performed by bots—computer programs or preprogrammed scripts that make automated edits without a need for real time human decision-making. " https://en.wikipedia.org/wiki/Wikipedia:Patrols
- log the edit - "In this case, the edit is merely added to the AbuseLog. When testing new filters, this is the suggested setting to use."

"Except in urgent situations, new edit filters should generally be tested without any actions specified (simply enabled) until a good number of edits have been logged and checked before being implemented in "warn" or "disallow" modes. If the filter is receiving more than a very small percentage of false positives it should usually not be placed in 'disallow' mode."

Alternatives:
"Edit filter managers should be familiar with alternatives that might be more appropriate in a given situation. For example, problems on a single page might be better served with page protection, and problems with page titles or link spam may find the title blacklist and spam blacklist more effective respectively. Because edit filters check every edit in some way, filters that are tripped only rarely are discouraged. "

Exemptions for "urgent situation" -- what/how are these defined?
Discussions may happen postfactum here and filter may be applied before having been thoroughly tested; in this case the corresponding editor is responsible for checking the logs regularly and making sure the filter acts as desired

Hidden filters!
"Non-admins in good standing who wish to review a proposed but hidden filter may message the mailing list for details."
// what is "good standing"?
// what are the arguments for hiding a filter?
// are users still informed if their edit triggers a hidden filter?

"For all filters, including those hidden from public view, a brief description of what the rule targets is displayed in the log, the list of active filters, and in any error messages generated by the filter. "

"Filters should only be hidden where necessary, such as in long-term abuse cases where the targeted user(s) could review a public filter and use that knowledge to circumvent it. Filters should not generally be named after abusive editors, but rather with a simple description of the type of abuse, provided not too much information is given away."

"Be careful not to test sensitive parts of private filters in a public test filter (such as Filter 1): use a private test filter (for example Filter 2) if testing is required."

harassment! mailinglist
"If it would not be desirable to discuss the need for a given edit filter on-wiki, such as where the purpose of the filter is to combat harassment by an abusive banned user who is likely to come across the details of the request, edit filter managers can be emailed directly or on the wikipedia-en-editfilters mailing list at wikipedia-en-editfilters@lists.wikimedia.org."

https://lists.wikimedia.org/mailman/listinfo/wikipedia-en-editfilters
"private mailing list used by English Wikipedia edit filter managers, "
"primarily for discussing hidden filters."
"The mailing list should not be used as a venue for discussions that could reasonably be held on-wiki."


batch testing interface

=================================================================
https://de.wikipedia.org/wiki/Wikipedia:Bearbeitungsfilter

"Der Bearbeitungsfilter (englisch: edit filter; früher: „Missbrauchsfilter“ oder abuse filter) ist ein vielseitig einsetzbares Werkzeug zur Beobachtung und Verhinderung problematischer Bearbeitungen. Dazu gehört die Bekämpfung von Verstößen gegen die Wikipedia-Richtlinien, insbesondere Wikipedia:Vandalismus."

"Derzeit können alle Administratoren Filter bearbeiten."
--> Unterschied zu EN, ne? Da gibts ne Spezielle Gruppe für? (Aber Admins können da Menschen reinstecken, auch sich selber)

Mögliche Auswirkungen
"
* das Verhindern von Edits, die bestimmte Eigenschaften erfüllen
* das Hinweisen des agierenden Benutzers bei solchen Edits
* das reine Aufspüren solcher Edits"

"Für jede aktive Filterregel gilt, dass sie begründet sein muss und die Verhältnismäßigkeit durch die konkret anzunehmenden potentiell schädigenden Bearbeitungen gewahrt ist."

"Gründe für den Einsatz des Bearbeitungsfilter können sein:
* Vandalismus/Sperrumgehungen durch einen Wikipedianer mit wechselnden Benutzerkonten/IP-Adressen oder auf mehreren Seiten, wobei eine konventionelle Artikel- oder Benutzer-Sperre zu viele Nebenwirkungen hätte
* sonst schwer zu findende (unabsichtliche) Verstöße gegen die Wikipedia-Richtlinien
* Erstellung von Wartungslisten (wobei versucht werden sollte, hier eher Bots zu nutzen)"

=================================================================
https://en.wikipedia.org/wiki/Wikipedia:Edit_filter_noticeboard

According to the Edit filter Notice board:
"There are currently 196 enabled filters and 13 stale filters with no hits in the past 30 days (Purge). See also the edit filter graphs." (Stand: 24.11.2018)
"There are currently 198 enabled filters and 11 stale filters with no hits in the past 30 days (Purge). See also the edit filter graphs." (Stand: 25.11.2018, seems to change frequently!)

- discuss current filter behaviour
- suggest filter for deletion, since it's not particularly helpful: " unnecessary, is preventing good edits, or is otherwise problematic,"
  (you can also raise the issue directly with the filter manager who created or enabled the filter)

apart from that: current ongoing discussions on single filters/problems that may require a filter

===============================================================
https://en.wikipedia.org/wiki/Wikipedia:Edit_filter/Requested
-- gibts nur noch auf Deutsch

- suggest new filters

"This page is for people without the abusefilter-modify permission or people without sufficient knowledge about the coding involved to make requests to enact edit filters."

There's a "Bear the following in mind:" checklist
"Filters are applied to all edits. Therefore, problematic changes that apply to a single page are likely not suitable for an edit filter."
- filter, after adding up, make editing slower
- in depth checks should be done by a separate software that users run on their own machines
- no trivial errors should be catched by filters (ala style guidelines)
- there are Titles Blacklist and Link/Spam Blacklist

===============================================================
https://de.wikipedia.org/wiki/Wikipedia:Bearbeitungsfilter/Antr%C3%A4ge
DE für  https://en.wikipedia.org/wiki/Wikipedia:Edit_filter/Requested

viel mehr kram auf der oberseite als bei der englischen; diskussionen zu jeden einzelnen(?) filter sind direkt verlinkt

"Auf dieser Seite können Vorschläge für neue Regeln des Bearbeitungsfilters eingereicht werden. Diskussionen zu Filterregeln (z.B. wegen irrtümlichen Blockaden), deren Nummer nicht bekannt ist, werden ebenfalls hier geführt. Zusätzlich gibt es für jede bereits bestehende Regel eine eigene Diskussionsseite. Eine Übersicht zu diesen einzelnen Seiten gibt der Abschnitt #Liste der Diskussionen zu einzelnen Regeln. Im Archiv werden Diskussionen gesammelt, für die keine Regeln erstellt wurden."

Ein Bsp:
https://de.wikipedia.org/wiki/Wikipedia:Bearbeitungsfilter/271
https://de.wikipedia.org/wiki/Wikipedia:Vandalismusmeldung/Archiv/2018/11/25#Benutzer:Zollwurf_(erl.)
-- ich hab mittlerweile den Eindruck, dass so was evtl auf der Engl. Wikipedia nicht öffentlich wäre?
-- allerdings, ist so ein Problem mit nem Filter zu lösen? Wie kann es sonst gelöst werden?

===============================================================
https://en.wikipedia.org/wiki/Wikipedia:Long-term_abuse

117 active cases [Stand 24.11.2018]
there's a list available at least for the active cases with detailed abuse reports
There's also an archive page of abuse cases: https://en.wikipedia.org/wiki/Wikipedia:Long-term_abuse/Archive (25 entries [Stand 24.11.2018])
And full list of cases: https://en.wikipedia.org/wiki/Wikipedia:Long-term_abuse/Full

"This page summarises a limited number of long term abusers, to assist members of the community who believe they may have cause to report another incident. Note that this page is not a noticeboard. Names should only be added for the most egregious and well-attested cases. Most users here will have been banned, some on multiple occasions. "

"Don't provide too much info
    The text should tread a careful balance between providing useful information and providing enough to obstruct detection. In general such information should only be shared with users of a high level of reputation."

===============================================================
https://de.wikipedia.org/wiki/Wikipedia:WikiProjekt_Vandalismusbek%C3%A4mpfung/Troll-Dokumentationsseiten
DE zu https://en.wikipedia.org/wiki/Wikipedia:Long-term_abuse

"Hier werden Seiten im Benutzernamensraum gesammelt, auf denen die Aktivitäten unterschiedlicher Wikipediastörer charakterisiert oder dokumentiert werden sollen. "
!!!"Eine Definition von störendem Verhalten, z. B. in Bezug auf Art, Umfang oder Dauer der Projektstörung, die eine Bezeichnung als „Wikipediatroll“ rechtfertigt, ist in der Autorengemeinschaft umstritten."

sonst eben wieder listen mit bekannten Fällen; kein Count der aktuell aktiven Fällen wie bei der Englischen Seite

===============================================================
https://en.wikipedia.org/wiki/Special:AbuseFilter/384

bad words in articles and user names filter

===============================================================
https://en.wikipedia.org/wiki/Special:AbuseLog
https://de.wikipedia.org/wiki/Spezial:Missbrauchsfilter-Logbuch
https://es.wikipedia.org/wiki/Especial:RegistroAbusos
https://ca.wikipedia.org/wiki/Especial:Registre_dels_abusos
https://bg.wikipedia.org/wiki/%D0%A1%D0%BF%D0%B5%D1%86%D0%B8%D0%B0%D0%BB%D0%BD%D0%B8:%D0%94%D0%BD%D0%B5%D0%B2%D0%BD%D0%B8%D0%BA_%D0%BD%D0%B0_%D1%84%D0%B8%D0%BB%D1%82%D1%8A%D1%80%D0%B0

can search for all filter triggers in a period of time/by a specific user

auf der Deutschen Seite ist die Filter-Aktion und -Beschreibung aufgelistet, aber die Filternummer ist nicht verlinkt, also kann man nicht direkt den Quellcode ansehen;
Außerdem muss man direkt auf die Seite gehen, um die versuchte Änderungen in der Versionsgeschichte anzugucken

die Spanische Seite ist ähnlich aufgebaut wie die Deutsche.
!!!Da es aber auf Spanisch anscheinend keine "Saved Revisions" (oder wie hieß das nochma) gibt, kann man eigenltich die abusiven Änderungen gar nicht mehr sichten und noch kann man den Filter angucken, der eigentlich getriggered wurde

Katalanisch ist das selbe wie Spanisch, mit dem Unterschied, dass aus irgendeinem Grund (keine Regelmäßigkeit festgestellt), manchmal die Summaries auf Englisch sind, da wird auch ein Diff mit den offending Changes angezeigt.

the Bulgarian page uses the same form as the English one, so source code of the filter as well as diff of the changes can be viewed

===============================================================
https://en.wikipedia.org/wiki/Wikipedia:Edit_filter/False_positives
https://es.wikipedia.org/wiki/Wikipedia:Filtro_de_ediciones/Portal/Archivo/Reporte_de_falsos_positivos/Actual
https://ca.wikipedia.org/wiki/Viquip%C3%A8dia:Filtre_d%27edicions/Falsos_positius

a detailed page with ongoing/recently reported cases

there seems to be no such page for BG and DE --> no possibility to report false positives?

================================================================
Current status (29.11.2018)

EN: There are currently 201 enabled filters, and 12 stale filters with no hits in the past 30 days (Purge).
from https://en.wikipedia.org/wiki/Special:AbuseFilter
DE: 170 enabled, disabled, privat, öffentlich https://de.wikipedia.org/wiki/Spezial:Missbrauchsfilter/?deletedfilters=hide&limit=250&title=Spezial%3AMissbrauchsfilter%2F
ES: 92 https://es.wikipedia.org/wiki/Especial:FiltroAntiAbusos/?deletedfilters=hide&limit=100&title=Especial%3AFiltroAntiAbusos%2F
CA: 24  https://ca.wikipedia.org/wiki/Especial:Filtre_d%27abuses (spannend: man muss sich anmelden um das angucken zu können!)
BG: 24 https://bg.wikipedia.org/wiki/%D0%A1%D0%BF%D0%B5%D1%86%D0%B8%D0%B0%D0%BB%D0%BD%D0%B8:%D0%A4%D0%B8%D0%BB%D1%82%D1%8A%D1%80_%D1%81%D1%80%D0%B5%D1%89%D1%83_%D0%B7%D0%BB%D0%BE%D1%83%D0%BF%D0%BE%D1%82%D1%80%D0%B5%D0%B1%D0%B8

=================================================================
https://en.wikipedia.org/wiki/Special:AbuseFilter

"There are currently 203 enabled filters, and 11 stale filters with no hits in the past 30 days (Purge)."

that's the management interface!
"Welcome to the Edit Filter management interface. Using the Edit Filter, authorized users can configure a wide range of tests, which may help identify and prevent potentially harmful edits and other activities before they are added to the wiki, and the automatic actions to be taken."

"PLEASE be careful. This is potent stuff. Unless it's urgent, always test your filters with no actions enabled first."

weird? the test interface https://en.wikipedia.org/wiki/Special:AbuseFilter/test
says: "For security reasons, only users with the right to view private abuse filters or modify filters may use this interface."
shouldn't all filter editors be able to test??

Collaboration with bots:
"There is a bot reporting users tripping certain filters at WP:AIV and WP:UAA; you can specify the filters here."
https://en.wikipedia.org/wiki/User:DatBot/filters

Sortable table of all filters with following columns:
Filter ID 	Public description 	Actions 	Status 	Last modified 	Visibility 	Hit count
links to single filters, e.g. --> https://en.wikipedia.org/wiki/Special:AbuseFilter/1 (see bellow for detailed filter page)
"Actions" is one of: warn | tag | disallow | throttle | ?? (possibly more, not directly visible)
"Status" is: enabled | disabled
"Last modified" provides a link to diff between versions and the user who did the modification
"Visibility" is: private | public
"Hit count": which period is counted? total number of hits since the filter was enabled? (for all enabled periods, in case it was enabled/disabled multiple times?)

Filter with most hits:
Filter ID 	Public description 	Actions 	Status 	Last modified 	Visibility 	Hit count
61 	New user removing references 	Tag 	Enabled 	12:43, 14 May 2017 by Zzuuzz (talk | contribs) 	Public 	1,593,851 hits

=====================================================================
https://en.wikipedia.org/wiki/Special:AbuseFilter/1

where following information can be viewed:
Filter id; public description; filter hits; statistics; code (conditions); notes (left by filter editors to log changes;); flags ("Hide details of this filter from public view", "enable this filter", "mark as deleted");
links to: last modified (with diff and user who modified it), edit filter's history; "export this filter to another wiki" tool;

Actions to take when matched:
Trigger actions only if the user trips a rate limit
Trigger these actions after giving the user a warning
Prevent the user from performing the action in question
Revoke the user's autoconfirmed status
Tag the edit in contributions lists and page histories

and the filter can be modified if the viewing editor has the right permissions

statistics are info such as "Of the last 1,728 actions, this filter has matched 10 (0.58%). On average, its run time is 0.34 ms, and it consumes 3 conditions of the condition limit." (that's filter id 61) // not sure what the condition limit is
"Of the last 5,616 actions, this filter has matched 0 (0.00%). On average, its run time is 0 ms, and it consumes 0 conditions of the condition limit." (that's filter id 1)

=========================================================================
https://en.wikipedia.org/wiki/Special:AbuseFilter/history/1

Time 	User 	Public filter description 	Flags 	Actions 	Changes

the link with the timestamp links back to the filter editor (see previous page)
user links to the user
changes links to a diff of the current revision with the previous one

=========================================================================
https://en.wikipedia.org/wiki/Wikipedia:Wikipedia_Signpost/2009-03-23/Abuse_Filter

"The AbuseFilter extension, developed by User:Werdna, is now enabled on English Wikipedia. The extension allows all edits to be checked against automatic filters and heuristics, which can be set up to look for patterns of vandalism including page move vandalism and juvenile-type vandalism, as well as common newbie mistakes. When a match is found, the extension can take specified actions, ranging from logging the edit to be checked, giving a warning (e.g. "did you really intend to blank a page?"), to more serious actions such as blocking users."
from https://en.wikipedia.org/wiki/Wikipedia:Wikipedia_Signpost/2009-03-23/Abuse_Filter
("The Signpost is a monthly community-written and -edited online newspaper covering the English Wikipedia, its sister projects, the Wikimedia Foundation, and the Wikimedia movement at large." https://en.wikipedia.org/wiki/Wikipedia:Wikipedia_Signpost/About)

Note: User:Werdna
https://en.wikipedia.org/wiki/User:Werdna
"I'm Andrew Garrett. I started volunteering in 2005, and I worked at the Wikimedia Foundation from 2009 until I left in 2015 because 7 years is a long time. This is my personal account, so while I'll make mistakes, I intend for actions taken with this account to be in my personal capacity only. My work account was Andrew Garrett."
http://www.andrewjgarrett.com/

=========================================================================
https://en.wikipedia.org/wiki/Wikipedia:Edit_filter/Instructions

"This section explains how to create a filter with some preliminary testing, so you don't flood the history page."
- read the docs https://www.mediawiki.org/wiki/Extension:AbuseFilter/Rules_format
- test with debugging tools  https://en.wikipedia.org/wiki/Special:AbuseFilter/tools (visible only for users who are already in the edit filter managers user group)
- test with batch testing interface (dito)
- create logging only filter: https://en.wikipedia.org/wiki/Special:AbuseFilter/new (needs permissions)
- Post a message at WP:EFN (edit filter notice board), so other edit filter managers have a chance to improve it
- Finally, fully enable your filter, e.g. add warning, prevention, tagging, etc.

tips on controlling efficiency/order of operations
lazy evaluation: when 1st negative condition is met, filter terminates execution

"You should always order your filters so that the condition that will knock out the largest number of edits is first. Usually this is a user groups or a user editcount check; in general, the last condition should be the regex that is actually looking for the sort of vandalism you're targeting. "

===========================================================================
https://www.mediawiki.org/wiki/Extension:AbuseFilter

Author(s)
    Andrew Garrett, <-- lead dev
    River Tarnell
    Victor Vasiliev
    Marius Hoch

a media wiki extention written in php;
licensed under GPL 2.0
no further dependencies needed

code repo: https://gerrit.wikimedia.org/g/mediawiki/extensions/AbuseFilter
issue tracker: https://phabricator.wikimedia.org/tag/abusefilter/

"Once the extension has been installed, filters can be created/tested/changed/deleted and the logs can be accessed from the Abuse filter management page Special:AbuseFilter. "

you can import filters from wikipedia

Creates following tables
mysql> describe abuse_filter; (https://www.mediawiki.org/wiki/Extension:AbuseFilter/abuse_filter_table)
+--------------------+---------------------+------+-----+---------+----------------+
| Field              | Type                | Null | Key | Default | Extra          |
+--------------------+---------------------+------+-----+---------+----------------+
| af_id              | bigint(20) unsigned | NO   | PRI | NULL    | auto_increment |
| af_pattern         | blob                | NO   |     | NULL    |                |
| af_user            | bigint(20) unsigned | NO   | MUL | NULL    |                |
| af_user_text       | varbinary(255)      | NO   |     | NULL    |                |
| af_timestamp       | binary(14)          | NO   |     | NULL    |                | // I think that's last modified
| af_enabled         | tinyint(1)          | NO   |     | 1       |                |
| af_comments        | blob                | YES  |     | NULL    |                |
| af_public_comments | tinyblob            | YES  |     | NULL    |                |
| af_hidden          | tinyint(1)          | NO   |     | 0       |                |
| af_hit_count       | bigint(20)          | NO   |     | 0       |                |
| af_throttled       | tinyint(1)          | NO   |     | 0       |                |
| af_deleted         | tinyint(1)          | NO   |     | 0       |                |
| af_actions         | varbinary(255)      | NO   |     |         |                |
| af_global          | tinyint(1)          | NO   |     | 0       |                |
| af_group           | varbinary(64)       | NO   | MUL | default |                |
+--------------------+---------------------+------+-----+---------+----------------+

mysql> describe abuse_filter_log; https://www.mediawiki.org/wiki/Extension:AbuseFilter/abuse_filter_log_table
+------------------+---------------------+------+-----+---------+----------------+
| Field            | Type                | Null | Key | Default | Extra          |
+------------------+---------------------+------+-----+---------+----------------+
| afl_id           | bigint(20) unsigned | NO   | PRI | NULL    | auto_increment |
| afl_filter       | varbinary(64)       | NO   | MUL | NULL    |                |
| afl_user         | bigint(20) unsigned | NO   | MUL | NULL    |                | \\User ID of the author of the action.
| afl_user_text    | varbinary(255)      | NO   |     | NULL    |                | \\User name of the author of the action.
| afl_ip           | varbinary(255)      | NO   | MUL | NULL    |                |
| afl_action       | varbinary(255)      | NO   |     | NULL    |                | \\The action which triggered the filter. Values can include the following values: edit, delete, createaccount, move, upload, autocreateaccount, stashupload
| afl_actions      | varbinary(255)      | NO   |     | NULL    |                | \\What the filter made about the action
| afl_var_dump     | blob                | NO   |     | NULL    |                | \\Value of the variables of the filter that matched the edit, stored as a serialized PHP array.
| afl_timestamp    | binary(14)          | NO   | MUL | NULL    |                |
| afl_namespace    | tinyint(4)          | NO   | MUL | NULL    |                | \\Target Namespace of the filtered action.
| afl_title        | varbinary(255)      | NO   |     | NULL    |                | \\Target title of the filter action.
| afl_wiki         | varbinary(64)       | YES  | MUL | NULL    |                |
| afl_deleted      | tinyint(1)          | NO   |     | 0       |                |
| afl_patrolled_by | int(10) unsigned    | YES  |     | NULL    |                |
| afl_rev_id       | int(10) unsigned    | YES  | MUL | NULL    |                |
| afl_log_id       | int(10) unsigned    | YES  | MUL | NULL    |                |
+------------------+---------------------+------+-----+---------+----------------+
16 rows in set (0.00 sec)

mysql> describe abuse_filter_history; (from https://www.mediawiki.org/wiki/Extension:AbuseFilter/abuse_filter_history_table)
+---------------------+---------------------+------+-----+---------+----------------+
| Field               | Type                | Null | Key | Default | Extra          |
+---------------------+---------------------+------+-----+---------+----------------+
| afh_id              | bigint(20) unsigned | NO   | PRI | NULL    | auto_increment |
| afh_filter          | bigint(20) unsigned | NO   | MUL | NULL    |                |
| afh_user            | bigint(20) unsigned | NO   | MUL | NULL    |                |
| afh_user_text       | varbinary(255)      | NO   | MUL | NULL    |                |
| afh_timestamp       | binary(14)          | NO   | MUL | NULL    |                |
| afh_pattern         | blob                | NO   |     | NULL    |                |
| afh_comments        | blob                | NO   |     | NULL    |                |
| afh_flags           | tinyblob            | NO   |     | NULL    |                |
| afh_public_comments | tinyblob            | YES  |     | NULL    |                |
| afh_actions         | blob                | YES  |     | NULL    |                |
| afh_deleted         | tinyint(1)          | NO   |     | 0       |                |
| afh_changed_fields  | varbinary(255)      | NO   |     |         |                |
| afh_group           | varbinary(64)       | YES  |     | NULL    |                |
+---------------------+---------------------+------+-----+---------+----------------+
13 rows in set (0.00 sec)

Note! table abuse_filter_history seems to not exist anymore

mysql> describe abuse_filter_action; (from https://www.mediawiki.org/wiki/Extension:AbuseFilter/abuse_filter_action_table)
+-----------------+---------------------+------+-----+---------+-------+
| Field           | Type                | Null | Key | Default | Extra |
+-----------------+---------------------+------+-----+---------+-------+
| afa_filter      | bigint(20) unsigned | NO   | PRI | NULL    |       |
| afa_consequence | varbinary(255)      | NO   | PRI | NULL    |       |
| afa_parameters  | tinyblob            | NO   |     | NULL    |       |
+-----------------+---------------------+------+-----+---------+-------+
3 rows in set (0.00 sec)

Seems to contain data for currently enabled filters only;
Question: how do we find data for disabled filters?

# API calls

## List information about filters:
https://en.wikipedia.org/w/api.php?action=query&list=abusefilters&abfshow=!private&abfprop=id%7Chits
or in the sandbox:
https://en.wikipedia.org/wiki/Special:ApiSandbox#action=query&list=abusefilters&abfshow=!private&abfprop=id%7Chits

Parameters

    abfstartid: The filter id to start enumerating from
    abfendid: The filter id to stop enumerating at
    abfdir: The direction in which to enumerate (older, newer)
    abfshow: Show only filters which meet these criteria (enabled|!enabled|deleted|!deleted|private|!private)
    abflimit: The maximum number of filters to list
    abfprop: Which properties to get (id|description|pattern|actions|hits|comments|lasteditor|lastedittime|status|private)

When filters are private, some of the properties specified with abfprop will be missing unless you have the appropriate user rights.

## List instances where actions triggered an abuse filter.
https://en.wikipedia.org/w/api.php?action=query&list=abuselog&afluser=SineBot&aflprop=ids
or in the sandbox:
https://en.wikipedia.org/wiki/Special:ApiSandbox#action=query&list=abuselog&afluser=SineBot&aflprop=ids

Parameters

    aflstart: The timestamp to start enumerating from
    aflend: The timestamp to stop enumerating at
    afldir: The direction in which to enumerate (older, newer)
    afluser: Show only entries where the action was attempted by a given user or IP address.
    afltitle: Show only entries where the action involved a given page.
    aflfilter: Show only entries that triggered a given filter ID
    afllimit: The maximum number of entries to list
    aflprop: Which properties to get (ids|user|title|action|result|timestamp|details)

===========================================================================
https://www.mediawiki.org/wiki/Extension:AbuseFilter/Rules_format

Manual on writing filter rules;

===========================================================================
https://phabricator.wikimedia.org/tag/abusefilter/

keep in mind in case of problems

===========================================================================
Google search for something on the quarry.wmflabs.org page

site:quarry.wmflabs.org all tables

===========================================================================
https://en.wikipedia.org/wiki/Wikipedia:Namespace

Namespaces
Subject namespaces 	Talk namespaces
0 	(Main/Article) 	Talk 	1
2 	User 	        User talk 	3
4 	Wikipedia 	    Wikipedia talk 	5
6 	File 	        File talk 	7
8 	MediaWiki 	    MediaWiki talk 	9
10 	Template 	    Template talk 	11
12 	Help 	        Help talk 	13
14 	Category 	    Category talk 	15
100 	Portal 	    Portal talk 	101
108 	Book 	    Book talk 	109
118 	Draft 	    Draft talk 	119
710 	TimedText 	TimedText talk 	711
828 	Module 	    Module talk 	829
2300 	Gadget 	    Gadget talk 	2301
2302 	Gadget definition 	Gadget definition talk 	2303
Virtual namespaces
-1 	Special
-2 	Media
